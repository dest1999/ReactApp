{"ast":null,"code":"import { getDatabase, set, remove, ref, onValue, update } from \"firebase/database\";\nexport const writeUserData = (userId, name, email) => {\n  const db = getDatabase();\n  set(ref(db, 'users/' + userId), {\n    id: userId,\n    username: name,\n    email: email\n  });\n};\nexport const updateUserName = (userId, username) => {\n  const db = getDatabase();\n  update(ref(db, 'users/' + userId), {\n    username\n  });\n};\nexport const writeChatData = (chatId, id, userId) => {\n  const db = getDatabase();\n  set(ref(db, 'users/' + userId + 'chats/' + chatId), {\n    id: chatId,\n    name: 'Chat' + id,\n    userId: userId\n  });\n};\nexport const removeChatData = (chatId, userId) => {\n  const db = getDatabase();\n  remove(ref(db, 'users/' + userId + 'chats/' + chatId), {\n    chatId\n  });\n};\nexport const writeMessagesData = (chatId, message, messId, userId) => {\n  const db = getDatabase();\n  set(ref(db, 'users/' + userId + `chats/` + chatId + `/messages/` + messId), {\n    id: `${chatId}.${messId}`,\n    text: message,\n    userId: userId\n  });\n};\nexport const setListenerDBUser = () => {\n  const db = getDatabase();\n  let data;\n  const starCountRef = ref(db, 'users/');\n  onValue(starCountRef, snapshot => {\n    data = snapshot.val();\n  });\n  return data;\n};\nexport const setListenerDBChats = userId => {\n  const db = getDatabase();\n  let data;\n  const starCountRef = ref(db, 'users/' + userId + `chats/`);\n  onValue(starCountRef, snapshot => {\n    data = snapshot.val();\n  });\n  return data;\n};\nexport const setListenerDBMessages = (chatId, userId) => {\n  const db = getDatabase();\n  let data;\n  const starCountRef = ref(db, 'users/' + userId + `chats/` + chatId + `/messages/`);\n  onValue(starCountRef, snapshot => {\n    data = snapshot.val();\n  });\n  return data;\n};","map":{"version":3,"names":["getDatabase","set","remove","ref","onValue","update","writeUserData","userId","name","email","db","id","username","updateUserName","writeChatData","chatId","removeChatData","writeMessagesData","message","messId","text","setListenerDBUser","data","starCountRef","snapshot","val","setListenerDBChats","setListenerDBMessages"],"sources":["C:/Users/serv_/source/repos/TryReact4usik/GB_React/myapp/src/firebase-db-utils.js"],"sourcesContent":["import { getDatabase, set, remove, ref, onValue, update } from \"firebase/database\";\n\nexport const writeUserData = (userId, name, email) => {\n    const db = getDatabase();\n    set(ref(db, 'users/' + userId), {\n        id: userId,\n        username: name,\n        email: email,\n    });\n}\n\nexport const updateUserName = (userId, username) => {\n    const db = getDatabase();\n    update(ref(db, 'users/' + userId), {username});\n}\n\nexport const writeChatData = (chatId, id, userId) => {\n    const db = getDatabase();\n    set(ref(db, 'users/' + userId + 'chats/' + chatId), {\n        id: chatId,\n        name: 'Chat' + id,\n        userId: userId,\n    });\n}\n\nexport const removeChatData = (chatId, userId) => {\n    const db = getDatabase();\n    remove(ref(db, 'users/' + userId + 'chats/' + chatId), {chatId});\n}\n\nexport const writeMessagesData = (chatId, message, messId, userId) => {\n    const db = getDatabase();\n    set(ref(db, 'users/' + userId + `chats/` + chatId + `/messages/` + messId), {\n        id: `${chatId}.${messId}`,\n        text: message,\n        userId: userId,\n    });\n}\n\nexport const setListenerDBUser = () => {\n    const db = getDatabase();\n    let data;\n    const starCountRef = ref(db, 'users/');\n    onValue(starCountRef, (snapshot) => {\n        data = snapshot.val();\n    });\n    return data;\n}\n\nexport const setListenerDBChats = (userId) => {\n    const db = getDatabase();\n    let data;\n    const starCountRef = ref(db, 'users/' + userId + `chats/`);\n    onValue(starCountRef, (snapshot) => {\n        data = snapshot.val();\n    });\n    return data;\n}\n\nexport const setListenerDBMessages = (chatId, userId) => {\n    const db = getDatabase();\n    let data;\n    const starCountRef = ref(db, 'users/' + userId + `chats/` + chatId + `/messages/`);\n    onValue(starCountRef, (snapshot) => {\n        data = snapshot.val();\n    });\n    return data;\n}"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,GAAtB,EAA2BC,MAA3B,EAAmCC,GAAnC,EAAwCC,OAAxC,EAAiDC,MAAjD,QAA+D,mBAA/D;AAEA,OAAO,MAAMC,aAAa,GAAG,CAACC,MAAD,EAASC,IAAT,EAAeC,KAAf,KAAyB;EAClD,MAAMC,EAAE,GAAGV,WAAW,EAAtB;EACAC,GAAG,CAACE,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAhB,CAAJ,EAA6B;IAC5BI,EAAE,EAAEJ,MADwB;IAE5BK,QAAQ,EAAEJ,IAFkB;IAG5BC,KAAK,EAAEA;EAHqB,CAA7B,CAAH;AAKH,CAPM;AASP,OAAO,MAAMI,cAAc,GAAG,CAACN,MAAD,EAASK,QAAT,KAAsB;EAChD,MAAMF,EAAE,GAAGV,WAAW,EAAtB;EACAK,MAAM,CAACF,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAhB,CAAJ,EAA6B;IAACK;EAAD,CAA7B,CAAN;AACH,CAHM;AAKP,OAAO,MAAME,aAAa,GAAG,CAACC,MAAD,EAASJ,EAAT,EAAaJ,MAAb,KAAwB;EACjD,MAAMG,EAAE,GAAGV,WAAW,EAAtB;EACAC,GAAG,CAACE,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAX,GAAoB,QAApB,GAA+BQ,MAApC,CAAJ,EAAiD;IAChDJ,EAAE,EAAEI,MAD4C;IAEhDP,IAAI,EAAE,SAASG,EAFiC;IAGhDJ,MAAM,EAAEA;EAHwC,CAAjD,CAAH;AAKH,CAPM;AASP,OAAO,MAAMS,cAAc,GAAG,CAACD,MAAD,EAASR,MAAT,KAAoB;EAC9C,MAAMG,EAAE,GAAGV,WAAW,EAAtB;EACAE,MAAM,CAACC,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAX,GAAoB,QAApB,GAA+BQ,MAApC,CAAJ,EAAiD;IAACA;EAAD,CAAjD,CAAN;AACH,CAHM;AAKP,OAAO,MAAME,iBAAiB,GAAG,CAACF,MAAD,EAASG,OAAT,EAAkBC,MAAlB,EAA0BZ,MAA1B,KAAqC;EAClE,MAAMG,EAAE,GAAGV,WAAW,EAAtB;EACAC,GAAG,CAACE,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAX,GAAqB,QAArB,GAA+BQ,MAA/B,GAAyC,YAAzC,GAAuDI,MAA5D,CAAJ,EAAyE;IACxER,EAAE,EAAG,GAAEI,MAAO,IAAGI,MAAO,EADgD;IAExEC,IAAI,EAAEF,OAFkE;IAGxEX,MAAM,EAAEA;EAHgE,CAAzE,CAAH;AAKH,CAPM;AASP,OAAO,MAAMc,iBAAiB,GAAG,MAAM;EACnC,MAAMX,EAAE,GAAGV,WAAW,EAAtB;EACA,IAAIsB,IAAJ;EACA,MAAMC,YAAY,GAAGpB,GAAG,CAACO,EAAD,EAAK,QAAL,CAAxB;EACAN,OAAO,CAACmB,YAAD,EAAgBC,QAAD,IAAc;IAChCF,IAAI,GAAGE,QAAQ,CAACC,GAAT,EAAP;EACH,CAFM,CAAP;EAGA,OAAOH,IAAP;AACH,CARM;AAUP,OAAO,MAAMI,kBAAkB,GAAInB,MAAD,IAAY;EAC1C,MAAMG,EAAE,GAAGV,WAAW,EAAtB;EACA,IAAIsB,IAAJ;EACA,MAAMC,YAAY,GAAGpB,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAX,GAAqB,QAA1B,CAAxB;EACAH,OAAO,CAACmB,YAAD,EAAgBC,QAAD,IAAc;IAChCF,IAAI,GAAGE,QAAQ,CAACC,GAAT,EAAP;EACH,CAFM,CAAP;EAGA,OAAOH,IAAP;AACH,CARM;AAUP,OAAO,MAAMK,qBAAqB,GAAG,CAACZ,MAAD,EAASR,MAAT,KAAoB;EACrD,MAAMG,EAAE,GAAGV,WAAW,EAAtB;EACA,IAAIsB,IAAJ;EACA,MAAMC,YAAY,GAAGpB,GAAG,CAACO,EAAD,EAAK,WAAWH,MAAX,GAAqB,QAArB,GAA+BQ,MAA/B,GAAyC,YAA9C,CAAxB;EACAX,OAAO,CAACmB,YAAD,EAAgBC,QAAD,IAAc;IAChCF,IAAI,GAAGE,QAAQ,CAACC,GAAT,EAAP;EACH,CAFM,CAAP;EAGA,OAAOH,IAAP;AACH,CARM"},"metadata":{},"sourceType":"module"}