{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\serv_\\\\source\\\\repos\\\\TryReact4usik\\\\GB_React\\\\myapp\\\\src\\\\components\\\\chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Messages } from './Messages';\nimport { Form } from './Form';\nimport { AUTHOR, BOT } from '../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet timer;\nexport function Chat(props) {\n  _s();\n\n  const {\n    name\n  } = props;\n  const [messagesList, setMessagesList] = useState([]);\n  useEffect(() => {\n    var _messagesList;\n\n    if (((_messagesList = messagesList[messagesList.length - 1]) === null || _messagesList === void 0 ? void 0 : _messagesList.author) === AUTHOR) {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        setMessagesList(prevList => [...prevList, {\n          author: BOT,\n          text: 'Я бот',\n          id: prevList.length\n        }]);\n      }, 2500);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n  }, [messagesList]);\n\n  const handleSendMessage = msg => {\n    setMessagesList(prevList => [...prevList, {\n      author: AUTHOR,\n      text: msg,\n      id: prevList.length\n    }]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Messages, {\n      messagesList: messagesList,\n      name: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSendMessage: handleSendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Chat, \"oRvtEu21gHhqg+iihM/mGm7uQPI=\");\n\n_c = Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","Messages","Form","AUTHOR","BOT","timer","Chat","props","name","messagesList","setMessagesList","length","author","clearTimeout","setTimeout","prevList","text","id","handleSendMessage","msg"],"sources":["C:/Users/serv_/source/repos/TryReact4usik/GB_React/myapp/src/components/chat.jsx"],"sourcesContent":["import React from 'react';\nimport { useState, useEffect } from 'react';\nimport { Messages } from './Messages';\nimport { Form } from './Form';\nimport { AUTHOR, BOT } from '../constants';\n\nlet timer;\n\nexport function Chat(props) {\n\n  const { name } = props;\n  \n  const [messagesList, setMessagesList] = useState([]);\n\n  useEffect(() => {\n\n    if(messagesList[messagesList.length-1]?.author === AUTHOR) {\n\n      clearTimeout(timer);\n\n      timer = setTimeout(() => {\n        setMessagesList((prevList) => ([\n          ...prevList,\n          {\n            author: BOT,\n            text: 'Я бот',\n            id: prevList.length\n          }\n        ]))\n      }, 2500);\n    }\n\n    return () => {\n      clearTimeout(timer);\n    };\n    \n  }, [messagesList]);\n\n  const handleSendMessage = (msg) => {\n    setMessagesList((prevList) => ([\n      ...prevList,\n      {\n        author: AUTHOR,\n        text: msg,\n        id: prevList.length\n      }\n    ]));\n  }\n\n  return (\n    <>\n          <Messages messagesList={messagesList} name={name} />\n          <Form onSendMessage={handleSendMessage}/>\n    </>\n  );\n}"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,IAAT,QAAqB,QAArB;AACA,SAASC,MAAT,EAAiBC,GAAjB,QAA4B,cAA5B;;;AAEA,IAAIC,KAAJ;AAEA,OAAO,SAASC,IAAT,CAAcC,KAAd,EAAqB;EAAA;;EAE1B,MAAM;IAAEC;EAAF,IAAWD,KAAjB;EAEA,MAAM,CAACE,YAAD,EAAeC,eAAf,IAAkCX,QAAQ,CAAC,EAAD,CAAhD;EAEAC,SAAS,CAAC,MAAM;IAAA;;IAEd,IAAG,kBAAAS,YAAY,CAACA,YAAY,CAACE,MAAb,GAAoB,CAArB,CAAZ,gEAAqCC,MAArC,MAAgDT,MAAnD,EAA2D;MAEzDU,YAAY,CAACR,KAAD,CAAZ;MAEAA,KAAK,GAAGS,UAAU,CAAC,MAAM;QACvBJ,eAAe,CAAEK,QAAD,IAAe,CAC7B,GAAGA,QAD0B,EAE7B;UACEH,MAAM,EAAER,GADV;UAEEY,IAAI,EAAE,OAFR;UAGEC,EAAE,EAAEF,QAAQ,CAACJ;QAHf,CAF6B,CAAhB,CAAf;MAQD,CATiB,EASf,IATe,CAAlB;IAUD;;IAED,OAAO,MAAM;MACXE,YAAY,CAACR,KAAD,CAAZ;IACD,CAFD;EAID,CAtBQ,EAsBN,CAACI,YAAD,CAtBM,CAAT;;EAwBA,MAAMS,iBAAiB,GAAIC,GAAD,IAAS;IACjCT,eAAe,CAAEK,QAAD,IAAe,CAC7B,GAAGA,QAD0B,EAE7B;MACEH,MAAM,EAAET,MADV;MAEEa,IAAI,EAAEG,GAFR;MAGEF,EAAE,EAAEF,QAAQ,CAACJ;IAHf,CAF6B,CAAhB,CAAf;EAQD,CATD;;EAWA,oBACE;IAAA,wBACM,QAAC,QAAD;MAAU,YAAY,EAAEF,YAAxB;MAAsC,IAAI,EAAED;IAA5C;MAAA;MAAA;MAAA;IAAA,QADN,eAEM,QAAC,IAAD;MAAM,aAAa,EAAEU;IAArB;MAAA;MAAA;MAAA;IAAA,QAFN;EAAA,gBADF;AAMD;;GA/CeZ,I;;KAAAA,I"},"metadata":{},"sourceType":"module"}